{"version":3,"sources":["../cauldron.js"],"names":[],"mappings":"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","file":"cauldron.js","sourcesContent":["'use strict';\n\n(function () {\n    /**\n    * Base class for Library, Formula, FormulaResult\n    * @constructor\n    */\n    function Common() {}\n    Common.prototype = {\n        /**\n        * @param {HTMLElement} element\n        * @returns {boolean}\n        */\n        isElementWithin: function (element) {\n            return this._container === element.parentElement;\n        },\n        /**\n        * @returns {boolean}\n        */\n        isContainerClear: function () {\n            return this._container.firstChild === null;\n        },\n        /**\n        * @param {HTMLElement} element\n        */\n        addElement: function (element) {\n            this._container.appendChild(element);\n        },\n        /**\n        * @param {HTMLElement} element\n        */\n        removeElement: function (element) {\n            this._container.removeChild(element);\n        },\n        /**\n        * remove all child elements\n        */\n        clearContainer: function () {\n            while (this._container.firstChild) {\n                this.removeElement(this._container.firstChild);\n            }\n        },\n        /**\n        * @returns {Array.<HTMLElement>}\n        */\n        getRenderedElements: function () {\n            return [].slice.apply(this._container.children);\n        },\n        /**\n        * @param {string} className\n        * @returns {Array.<string>}\n        */\n        getNamesRenderedElements: function (className) {\n            if (this.isContainerClear()) {\n                return [];\n            }\n            var renderedElements = this.getRenderedElements();\n            var names = renderedElements\n                .filter(item => {\n                    return item.classList.contains(className);\n                })\n                .map(item => item.dataset.element);\n            return names;\n        }\n    };\n\n    /**\n    * List of available alchemical elements\n    * @constructor\n    */\n    var Library = function () {\n        this._container = document.querySelector('.library__elements');\n        this._elements = [];\n        this._timer = null;\n        this._onMouseWheel = this._onMouseWheel.bind(this);\n    };\n    /**\n    * Inherit from Common\n    */\n    Library.prototype = Object.create(Common.prototype);\n    Library.prototype.constructor = Library;\n    /**\n    * @param {string} jsonUrl\n    */\n    Library.prototype.loadInfo = function (jsonUrl) {\n        loadJSON(jsonUrl, function (loadedElements) {\n            this._elements = loadedElements;\n            this.renderElements();\n            var mousewheelEvt = isFirefox() ? 'DOMMouseScroll' :\n                'mousewheel';\n            this._container.addEventListener(mousewheelEvt, this._onMouseWheel);\n        }.bind(this));\n    };\n    /**\n    * Render all elements with inLibrary flag\n    */\n    Library.prototype.renderElements = function () {\n        var elementsFragment = document.createDocumentFragment();\n        this._elements\n            .filter(item => item.inLibrary)\n            .sort((a, b) => {\n                if (a.name > b.name) {\n                    return 1;\n                } else if (a.name < b.name) {\n                    return -1;\n                }\n                return 0;\n            })\n            .forEach(item => {\n                var elem = new Element(item.name);\n                elementsFragment.appendChild(elem.getElementNode());\n                elem.loadImg(item.url);\n            });\n        this._container.appendChild(elementsFragment);\n    };\n    /**\n    * @param {number} displacement\n    */\n    Library.prototype.scrollElements = function (displacement) {\n        var curY = this._container.style.transform.match(/-?\\d+/);\n        displacement = curY ? Number(curY[0]) + displacement : displacement;\n        this._container.style.transform = \"translateY(\" + displacement + \"px)\";\n    };\n    /**\n    * Find url on element which has got a name in func argument\n    * @param {string} name\n    * @returns {string|null}\n    */\n    Library.prototype.getUrlByName = function (name) {\n        var i = 0;\n        for (; i < this._elements.length; i++) {\n            if (this._elements[i].name === name) {\n                break;\n            }\n        }\n        return this._elements[i].url ? this._elements[i].url : null;\n    };\n    /**\n    * @param {HTMLElement} element\n    */\n    Library.prototype.addElement = function (element) {\n        var renderedElements = this.getRenderedElements();\n        var i = 0;\n        while (renderedElements.length > i &&\n            renderedElements[i].dataset.element < element.dataset.element) {\n            i++;\n        }\n        this._container.insertBefore(element, renderedElements[i]);\n    };\n    /**\n    * Highlight name of the elements which match to the filter input\n    */\n    Library.prototype.highlightElements = function () {\n        var filterVal = filter.getFilterValue();\n        var regExp = new RegExp('^(' + filterVal + ')', 'gi');\n        var renderedElements = this.getRenderedElements();\n        renderedElements.forEach(item => {\n            if (!(item.dataset.element.search(regExp) + 1)) {\n                item.classList.add('hidden');\n            } else {\n                item.classList.remove('hidden');\n                var elementName = item.querySelector('.element__name');\n                elementName.innerHTML = filterVal.length ?\n                    elementName.textContent.replace(regExp, '<b>$1</b>') :\n                    elementName.textContent;\n            }\n        });\n    };\n    /**\n    * Event handler of mouse wheel\n    * @param {Event} event\n    * @private\n    */\n    Library.prototype._onMouseWheel = function (event) {\n        var displacement = this.getRenderedElements()[0].offsetHeight;\n        var maxTop = filter.getHeight();\n        var libraryClientRect = this._container.getBoundingClientRect();\n        var delta = event.detail ? event.detail * (-120) : event.wheelDelta;\n\n        clearTimeout(this._timer);\n        this._timer = delta > 0 ?\n            setTimeout(function () {\n                if (maxTop <= libraryClientRect.top) {\n                    return;\n                }\n                maxTop > libraryClientRect.top + displacement ?\n                    this.scrollElements(displacement) :\n                    this.scrollElements(maxTop - libraryClientRect.top);\n            }.bind(this), 66) :\n            setTimeout(function () {\n                if (window.innerHeight >= libraryClientRect.bottom) {\n                    return;\n                }\n                window.innerHeight < libraryClientRect.bottom - displacement ?\n                    this.scrollElements(-displacement) :\n                    this.scrollElements(window.innerHeight - libraryClientRect.bottom);\n            }.bind(this), 66);\n    };\n\n    /**\n    * @constructor\n    */\n    var Formula = function () {\n        this._container = document.querySelector('.workspace__formula');\n        this._formulas = [];\n    };\n    /**\n    * Inherit from Common\n    */\n    Formula.prototype = Object.create(Common.prototype);\n    Formula.prototype.constructor = Formula;\n    /**\n    * @param {string} jsonUrl\n    */\n    Formula.prototype.loadInfo = function (jsonUrl) {\n        loadJSON(jsonUrl, function (loadedFormulas) {\n            this._formulas = loadedFormulas;\n        }.bind(this));\n    };\n    /**\n    * @param {HTMLElement} element\n    */\n    Formula.prototype.addElement = function (element) {\n        if (!this._container.childElementCount) {\n            Common.prototype.addElement.call(this, element);\n            this.calculate();\n            return;\n        }\n        var plus = document.createElement('span');\n        plus.classList.add('workspace__formula-plus');\n        Common.prototype.addElement.call(this, plus);\n        Common.prototype.addElement.call(this, element);\n        this.calculate();\n    };\n    /**\n    * @param {HTMLElement} element\n    */\n    Formula.prototype.removeElement = function (element) {\n        if (this._container.childElementCount < 2) {\n            Common.prototype.removeElement.call(this, element);\n            this.calculate();\n            return;\n        }\n        Common.prototype.removeElement.call(this, element);\n        this.removeRedundantPluses();\n    };\n    /**\n    * Remove spare pluses between elements or on the edges\n    */\n    Formula.prototype.removeRedundantPluses = function () {\n        var pluses = this.getRenderedElements();\n        pluses\n            .filter(item => item.classList.contains('workspace__formula-plus'))\n            .forEach(item => {\n                if (item === this._container.firstElementChild ||\n                    item === this._container.lastElementChild ||\n                    item.className === item.nextElementSibling.className) {\n                    this._container.removeChild(item);\n                }\n            });\n        this.calculate();\n    };\n    /**\n    * Calculate formula and display the result\n    */\n    Formula.prototype.calculate = function () {\n        var elementsNames = this.getNamesRenderedElements('element');\n\n        if (this.isContainerClear() || elementsNames.length < 2) {\n            formulaRes.clearContainer();\n            formulaRes.reset();\n            return;\n        }\n\n        var formulas = this._formulas\n            .filter(item => item.elements.length <= elementsNames.length)\n            .sort((a, b) => {\n                if (a.elements.length > b.elements.length) {\n                    return -1;\n                } else if (a.elements.length < b.elements.length) {\n                    return 1;\n                }\n                return 0;\n            });\n\n        var resultName = null;\n        var prevRes = false;\n        var prevFormulaElements = formulaRes.getFormulaElements();\n\n        if (prevFormulaElements.length) {\n            prevRes = prevFormulaElements.every(item => {\n                return Boolean(elementsNames.indexOf(item) + 1);\n            });\n        }\n\n        for (var i = 0; i < formulas.length; i++) {\n            var answ = formulas[i].elements.every(item => {\n                return Boolean(elementsNames.indexOf(item) + 1);\n            });\n            if (answ && (formulas[i].elements.length !== prevFormulaElements.length || !prevRes)) {\n                formulaRes.setFormulaElements(formulas[i].elements);\n                resultName = formulas[i].result;\n                break;\n            } else if (!answ) {\n                continue;\n            }\n            break;\n        }\n\n        if (!resultName && !prevRes) {\n            formulaRes.clearContainer();\n            formulaRes.reset();\n            return;\n        } else if (!resultName) {\n            return;\n        }\n\n        var elem = new Element(resultName);\n        formulaRes.setResultElement(elem.getElementNode());\n        var url = library.getUrlByName(resultName);\n        elem.loadImg(url, false);\n    };\n\n    /**\n    * @constructor\n    */\n    var FormulaResult = function () {\n        this._container = document.querySelector('.workspace__result');\n        this._resultElement = null;\n        this._formulaElements = [];\n    };\n    /**\n    * Inherit from Common\n    */\n    FormulaResult.prototype = Object.create(Common.prototype);\n    FormulaResult.prototype.constructor = FormulaResult;\n    /**\n    * Come back to default\n    */\n    FormulaResult.prototype.reset = function () {\n        this._resultElement = null;\n        this._formulaElements = [];\n    };\n    /**\n    * Returns array with names of elements in the Formula area\n    * @returns {Array.<string>}\n    */\n    FormulaResult.prototype.getFormulaElements = function () {\n        return this._formulaElements;\n    };\n    /**\n    * Leave result Element unchanged if formula isn't changing to more difficult\n    * @param {Array.<string>} arr\n    */\n    FormulaResult.prototype.setFormulaElements = function (arr) {\n        this._formulaElements = arr;\n    };\n    /**\n    * @returns {HTMLElement|null}\n    */\n    FormulaResult.prototype.getResultElement = function () {\n        return this._resultElement;\n    };\n    /**\n    * @param {HTMLElement} element\n    */\n    FormulaResult.prototype.setResultElement = function (element) {\n        if (!this.getResultElement()) {\n            this.addElement(element);\n        } else {\n            this._container.replaceChild(element, this._resultElement);\n        }\n        this._resultElement = element;\n    };\n    /**\n    * @param {HTMLElement} element\n    */\n    FormulaResult.prototype.addElement = function (element) {\n        if (this.isContainerClear()) {\n            var arrow = document.createElement('span');\n            arrow.classList.add('workspace__result-arrow');\n            Common.prototype.addElement.call(this, arrow);\n        }\n        Common.prototype.addElement.call(this, element);\n    };\n\n    /**\n    * @param {string} newName\n    * @constructor\n    */\n    var Element = function (newName) {\n        this._elementTemplate = document.getElementById('element-template');\n        this._element = this._elementTemplate.content.children[0].cloneNode(true);\n        this._elementName = this._element.querySelector('.element__name');\n        this._elementImg = this._element.querySelector('img');\n        this._elementName.textContent = newName;\n        this._element.dataset.element = newName;\n        this._onElementImgClick = this._onElementImgClick.bind(this);\n    };\n    Element.prototype = {\n        /**\n        * @param {string} url\n        * @param {boolean} addEvent\n        */\n        loadImg: function (url, addEvent) {\n            addEvent = (typeof addEvent === 'undefined') ? true : addEvent;\n            var img = new Image();\n            img.src = url;\n            img.classList.add('element__img');\n\n            img.addEventListener('load', () => {\n                this._element.replaceChild(img, this._elementImg);\n                this._elementImg = img;\n                if (addEvent) {\n                    this._elementImg.addEventListener('click', this._onElementImgClick);\n                }\n            });\n            img.addEventListener('error', () => {\n                this._elementImg.classList.add('element__img', 'img-load-failure');\n                if (addEvent) {\n                    this._elementImg.addEventListener('click', this._onElementImgClick);\n                }\n            });\n        },\n        /**\n        * @returns {HTMLElement}\n        */\n        getElementNode: function () {\n            return this._element;\n        },\n        /**\n        * @param {Event} event\n        * @private\n        */\n        _onElementImgClick: function (event) {\n            event.preventDefault();\n            if (isFirefox() && this._element.classList.contains('noclick')) {\n                this._element.classList.remove('noclick');\n                return;\n            }\n            var imgClickEvent = new CustomEvent('imgElementClick',\n                { detail: { element: this._element } });\n            window.dispatchEvent(imgClickEvent);\n        }\n    };\n\n    /**\n    * @constructor\n    */\n    var Filter = function () {\n        this._filterInput = document.getElementById('filter');\n        this._filterClear = document.querySelector('.filter__clear');\n        this._onInputEnterText = this._onInputEnterText.bind(this);\n        this._onClearClick = this._onClearClick.bind(this);\n        this._filterInput.addEventListener('input', this._onInputEnterText);\n        this._filterClear.addEventListener('click', this._onClearClick);\n    };\n\n    Filter.prototype = {\n        /**\n        * @returns {number}\n        */\n        getHeight: function () {\n            var styles = window.getComputedStyle(this._filterInput.parentElement);\n            var margin = parseInt(styles.marginTop) + parseInt(styles.marginBottom);\n            return this._filterInput.offsetHeight + margin;\n        },\n        /**\n        * @returns {string}\n        */\n        getFilterValue: function () {\n            return this._filterInput.value;\n        },\n        /**\n        * @returns {boolean}\n        */\n        isFilterInputClear: function () {\n            return !this._filterInput.value.length;\n        },\n        /**\n        * Event handler of input any symbol in input area\n        * @private\n        */\n        _onInputEnterText: function () {\n            this._filterInput.value.length ? this._filterClear.classList.remove('hidden') :\n                this._filterClear.classList.add('hidden');\n            library.highlightElements();\n        },\n        /**\n        * Event handler of click on cross\n        * @param {Event} event\n        * @private\n        */\n        _onClearClick: function (event) {\n            event.preventDefault();\n            this._filterInput.value = '';\n            this._filterInput.dispatchEvent(new Event('input'));\n        }\n    };\n\n\n    /**\n    * Singleton for drag and drop elements\n    */\n    var dragAndDrop = new function () {\n        var dragObj = {};\n        /**\n        * Event handler of hold down the left mouse button\n        * @param {Event} event\n        */\n        function onMouseDown(event) {\n            if (event.which !== 1) {\n                return;\n            }\n            dragObj.elementImg = event.target.closest('.element__img');\n            if (!dragObj.elementImg || dragObj.elementImg.closest('.workspace__result')) {\n                return;\n            }\n            dragObj.element = dragObj.elementImg.closest('.element');\n            dragObj.downX = event.pageX;\n            dragObj.downY = event.pageY;\n\n            event.preventDefault();\n        }\n        /**\n        * Event handler of moving a mouse\n        * @param {Event} event\n        */\n        function onMouseMove(event) {\n            if (!dragObj.element) {\n                return;\n            }\n            if (!dragObj.isDragStart) {\n                dragObj.lastNextSibling = dragObj.element.nextSibling;\n                dragObj.lastParent = dragObj.element.parentNode;\n                var moveX = event.pageX - dragObj.downX;\n                var moveY = event.pageY - dragObj.downY;\n                if (Math.abs(moveX) < 5 && Math.abs(moveY) < 5) {\n                    return;\n                }\n                var coords = getCoords(dragObj.element);\n                var prevImgSizes = getSizes(dragObj.elementImg);\n                dragObj.shiftX = dragObj.downX - coords.left;\n                dragObj.shiftY = dragObj.downY - coords.top;\n                startDrag();\n                var currImgSizes = getSizes(dragObj.elementImg);\n                if (currImgSizes.width !== prevImgSizes.width ||\n                    currImgSizes.height !== prevImgSizes.height) {\n                    dragObj.shiftX += (currImgSizes.width - prevImgSizes.width) / 2;\n                    dragObj.shiftY += (currImgSizes.height - prevImgSizes.height) / 2;\n                }\n            }\n            dragObj.element.style.left = event.pageX - dragObj.shiftX + 'px';\n            dragObj.element.style.top = event.pageY - dragObj.shiftY + 'px';\n\n            event.preventDefault();\n        }\n        /**\n        * Event handler of the end of hold left mouse button\n        * @param event\n        */\n        function onMouseUp(event) {\n            if (dragObj.isDragStart) {\n                finishDrag(event);\n            }\n            dragObj = {};\n        }\n        /**\n        * Beginning of the dragging element\n        */\n        function startDrag() {\n            if (isFirefox()) {\n                dragObj.element.classList.add('noclick');\n            }\n            dragObj.element.classList.add('element--drag');\n            dragObj.elementImg.classList.add('element__img--drag');\n            document.body.appendChild(dragObj.element);\n            dragObj.element.style.position = 'absolute';\n            dragObj.isDragStart = true;\n        }\n        /**\n        * Beginning of the end of the dragging element\n        * @param {Event} event\n        */\n        function finishDrag(event) {\n            dragObj.dropElem = findDroppable(event);\n            if (!dragObj.dropElem) {\n                rollback();\n            } else {\n                onDragEnd();\n            }\n        }\n        /**\n        * Cancel dragging and return element to the previous position\n        */\n        function rollback() {\n            dragObj.lastParent.insertBefore(dragObj.element, dragObj.lastNextSibling);\n            resetElementStyle();\n        }\n        /**\n        * The end of the dragging element\n        */\n        function onDragEnd() {\n            resetElementStyle();\n            var elementName = dragObj.element.querySelector('.element__name');\n            if (isLibraryParent()) {\n                if (elementName.getElementsByTagName('b')) {\n                    elementName.innerHTML = elementName.textContent;\n                }\n                formula.addElement(dragObj.element);\n                return;\n            }\n            formula.removeRedundantPluses();\n            library.addElement(dragObj.element);\n            if (!filter.isFilterInputClear()) {\n                library.highlightElements();\n            }\n        }\n\n        /**\n        * Find drop container\n        * @param {Event} event\n        * @returns {HTMLElement|null}\n        */\n        function findDroppable(event) {\n            dragObj.element.classList.add('hidden');\n            var elem = document.elementFromPoint(event.clientX, event.clientY);\n            dragObj.element.classList.remove('hidden');\n            if (elem === null) {\n                return null;\n            }\n            if (isLibraryParent()) {\n                return elem.closest('.workspace');\n            }\n            return elem.closest('.library');\n        }\n        function resetElementStyle() {\n            dragObj.element.classList.remove('element--drag');\n            dragObj.elementImg.classList.remove('element__img--drag');\n            dragObj.element.style.position = 'static';\n        }\n        /**\n        * @param {HTMLElement} elem\n        * @returns {{top: Number, left: Number}}\n        */\n        function getCoords(elem) {\n            var box = elem.getBoundingClientRect();\n            return {\n                top: box.top,\n                left: box.left\n            };\n        }\n        /**\n        * Returns sizes of the Image\n        * @param {HTMLElement} elem\n        * @returns {{width: Number, height: Number}}\n        */\n        function getSizes(elem) {\n            var styles = window.getComputedStyle(elem);\n            return {\n                width: parseInt(styles.width),\n                height: parseInt(styles.height)\n            };\n        }\n        /**\n        * @returns {boolean}\n        */\n        function isLibraryParent() {\n            return dragObj.lastParent.classList.contains('library__elements');\n        }\n        document.addEventListener('mousedown', onMouseDown);\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    };\n\n    /**\n    * @param {string} url\n    * @param {Function} callback\n    */\n    function loadJSON(url, callback) {\n        fetch(url)\n            .then(response => {\n                if (response.status >= 200 && response.status < 300) {\n                    return Promise.resolve(response.json());\n                } else {\n                    return Promise.reject(new Error(response.statusText));\n                }\n            })\n            .then(data => {\n                callback(data);\n            })\n            .catch(error => {\n                console.log(\"Failed\", error);\n            });\n    }\n\n    function initEvents() {\n        window.addEventListener('imgElementClick', function (event) {\n            var element = event.detail.element;\n            var elementName = element.querySelector('.element__name');\n            if (library.isElementWithin(element)) {\n                library.removeElement(element);\n                if (elementName.getElementsByTagName('b')) {\n                    elementName.innerHTML = elementName.textContent;\n                }\n                formula.addElement(element);\n            } else if (formula.isElementWithin(element)) {\n                formula.removeElement(element);\n                library.addElement(element);\n                if (!filter.isFilterInputClear()) {\n                    library.highlightElements();\n                }\n            }\n        });\n\n        var formulasClear = document.querySelector('.workspace__clear');\n        formulasClear.addEventListener('click', function (event) {\n            event.preventDefault();\n            var elementsInFormula = formula.getRenderedElements();\n            formula.clearContainer();\n            elementsInFormula.filter(item => {\n                return item.classList.contains('element');\n            })\n            .forEach(item => {\n                library.addElement(item);\n            });\n            if (!filter.isFilterInputClear()) {\n                library.highlightElements();\n            }\n        });\n    }\n\n    /**\n    * For MouseWheel -> DOMMouseScroll and for DragAndDrop. Triggered events in the following order:\n    * in Chrome: mousedown -> mouseup (without click)\n    * in Firefox: mousedown -> mouseup -> click\n    * @returns {boolean}\n    */\n    function isFirefox() {\n        return /Firefox/i.test(navigator.userAgent);\n    }\n\n    initEvents();\n    var library = new Library();\n    var formula = new Formula();\n    var formulaRes = new FormulaResult();\n    library.loadInfo('elements.json');\n    formula.loadInfo('formulas.json');\n    var filter = new Filter();\n})();\n"]}